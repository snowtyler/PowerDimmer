<Window x:Class="PowerDimmer.TrayMenuWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStartupLocation="Manual"
        ShowInTaskbar="False"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        Width="340"
        MinHeight="300"
        SizeToContent="Height">
    <Window.Resources>
        <SolidColorBrush x:Key="MenuBackground" Color="#1E2024" />
        <SolidColorBrush x:Key="MenuBackgroundBottom" Color="#17181B" />
        <SolidColorBrush x:Key="MenuBorder" Color="#2C2D33" />
        <SolidColorBrush x:Key="MenuText" Color="#F4F4F5" />
        <SolidColorBrush x:Key="MenuSubText" Color="#A6A7AB" />
        <SolidColorBrush x:Key="Accent" Color="#3B82F6" />
        <SolidColorBrush x:Key="TrackInactive" Color="#2E2F35" />

        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Foreground" Value="{StaticResource MenuText}" />
            <Setter Property="Background" Value="#2C2D33" />
            <Setter Property="BorderBrush" Value="#35363C" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="10,6" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#34363D" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#2A2B30" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SwitchToggleStyle" TargetType="ToggleButton">
            <Setter Property="Width" Value="44" />
            <Setter Property="Height" Value="24" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Grid>
                            <Border x:Name="Track"
                                    Background="#2D2E34"
                                    BorderBrush="#3A3B40"
                                    BorderThickness="1"
                                    CornerRadius="12" />
                            <Ellipse x:Name="Thumb"
                                     Width="18"
                                     Height="18"
                                     Fill="#F1F1F2"
                                     Margin="3"
                                     HorizontalAlignment="Left" />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Track" Property="Background" Value="{StaticResource Accent}" />
                                <Setter TargetName="Track" Property="BorderBrush" Value="#5A96F7" />
                                <Setter TargetName="Thumb" Property="HorizontalAlignment" Value="Right" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Track" Property="Opacity" Value="0.6" />
                                <Setter TargetName="Thumb" Property="Opacity" Value="0.7" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernSliderStyle" TargetType="Slider">
            <Setter Property="Height" Value="22" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Track x:Name="PART_Track" IsDirectionReversed="False">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="Slider.DecreaseLarge"
                                                  Background="{StaticResource Accent}"
                                                  Height="4"
                                                  BorderThickness="0"
                                                  Focusable="False" />
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="Slider.IncreaseLarge"
                                                  Background="{StaticResource TrackInactive}"
                                                  Height="4"
                                                  BorderThickness="0"
                                                  Focusable="False" />
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Width="16"
                                           Height="16"
                                           Background="#F1F1F2"
                                           BorderBrush="#B3B4B8"
                                           BorderThickness="1" />
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border CornerRadius="12"
            BorderBrush="{StaticResource MenuBorder}"
            BorderThickness="1"
            SnapsToDevicePixels="True">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#1F2126" Offset="0" />
                <GradientStop Color="#17181B" Offset="1" />
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect Color="#AA000000" BlurRadius="24" ShadowDepth="10" Opacity="0.35" />
        </Border.Effect>

        <StackPanel Margin="14">
            <DockPanel LastChildFill="True">
                <TextBlock Text="PowerDimmer"
                           Foreground="{StaticResource MenuText}"
                           FontSize="14"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center" />
                <Button Content="Exit"
                        DockPanel.Dock="Right"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Click="OnExitClicked" />
            </DockPanel>

            <StackPanel Margin="0,14,0,0">
                <TextBlock Text="Brightness"
                           Foreground="{StaticResource MenuText}"
                           FontSize="12"
                           FontWeight="SemiBold" />
                <Grid Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Slider Grid.Column="0"
                            Minimum="0"
                            Maximum="100"
                            Value="{Binding Brightness, Mode=TwoWay}"
                            Style="{StaticResource ModernSliderStyle}" />
                    <TextBlock Grid.Column="1"
                               Text="{Binding Brightness}"
                               Foreground="{StaticResource MenuSubText}"
                               FontSize="12"
                               Margin="12,0,0,0"
                               VerticalAlignment="Center" />
                </Grid>
            </StackPanel>

            <StackPanel Margin="0,16,0,0">
                <TextBlock Text="QUICK TOGGLES"
                           Foreground="{StaticResource MenuSubText}"
                           FontSize="11"
                           FontWeight="SemiBold"
                           Margin="0,0,0,6" />

                <Grid Margin="0,6,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="&#xE706;"
                               FontFamily="Segoe Fluent Icons"
                               Foreground="{StaticResource MenuText}"
                               FontSize="16"
                               VerticalAlignment="Center"
                               Margin="0,0,10,0" />
                    <StackPanel Grid.Column="1">
                        <TextBlock Text="Dimming"
                                   Foreground="{StaticResource MenuText}"
                                   FontSize="12"
                                   FontWeight="SemiBold" />
                        <TextBlock Text="Ctrl + Win + Alt + D"
                                   Foreground="{StaticResource MenuSubText}"
                                   FontSize="10" />
                    </StackPanel>
                    <ToggleButton Grid.Column="2"
                                  Style="{StaticResource SwitchToggleStyle}"
                                  IsChecked="{Binding DimmingEnabled}" />
                </Grid>

                <Grid Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="&#xE7F4;"
                               FontFamily="Segoe Fluent Icons"
                               Foreground="{StaticResource MenuText}"
                               FontSize="16"
                               VerticalAlignment="Center"
                               Margin="0,0,10,0" />
                    <StackPanel Grid.Column="1">
                        <TextBlock Text="Dim taskbar"
                                   Foreground="{StaticResource MenuText}"
                                   FontSize="12"
                                   FontWeight="SemiBold" />
                        <TextBlock Text="Apply dimming to the taskbar"
                                   Foreground="{StaticResource MenuSubText}"
                                   FontSize="10" />
                    </StackPanel>
                    <ToggleButton Grid.Column="2"
                                  Style="{StaticResource SwitchToggleStyle}"
                                  IsChecked="{Binding DimTaskbar}" />
                </Grid>

                <Grid Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="&#xE8FB;"
                               FontFamily="Segoe Fluent Icons"
                               Foreground="{StaticResource MenuText}"
                               FontSize="16"
                               VerticalAlignment="Center"
                               Margin="0,0,10,0" />
                    <StackPanel Grid.Column="1">
                        <TextBlock Text="Active on launch"
                                   Foreground="{StaticResource MenuText}"
                                   FontSize="12"
                                   FontWeight="SemiBold" />
                        <TextBlock Text="Start dimming when the app opens"
                                   Foreground="{StaticResource MenuSubText}"
                                   FontSize="10" />
                    </StackPanel>
                    <ToggleButton Grid.Column="2"
                                  Style="{StaticResource SwitchToggleStyle}"
                                  IsChecked="{Binding ActiveOnLaunch}" />
                </Grid>
            </StackPanel>
        </StackPanel>
    </Border>
</Window>
